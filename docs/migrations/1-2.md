# Migration Guide (1.0.2 -> 2.0.0)

This document details how to migrate from version 1.0.2 to 2.0.0.

## Updating Dough prefs to recipe data

The `Prefs` suffix has been renamed to `RecipeData` in order to be more consistent with class naming. Fix this changing all usages of `*Prefs` to `*RecipeData`.

Old way:

```dart
DoughRecipe(
  data: DoughRecipeData(
    viscosity: 5000,
    adhesion: 14,
    draggablePrefs: DraggableDoughPrefs(
      breakDistance: 80,
      useHapticsOnBreak: true,
    ),
  ),
  child: app,
);
```

New way:

```dart
DoughRecipe(
  data: DoughRecipeData(
    viscosity: 5000,
    adhesion: 14,
    draggableDoughRecipe: DraggableDoughRecipeData(
      breakDistance: 80,
      useHapticsOnBreak: true,
    ),
  ),
  child: app,
);
```

## Using GyroDough

The `GyroDough` widget has moved to the [dough_sensors package](https://pub.dev/packages/dough_sensor) because it introduced an uneccessary platform dependency. This migration was necessary in order to keep Dough cross platform. To use `GyroDough`, follow the steps below for migration.

### 1. Depend on the new package by adding this to your `pubspec.yml`

```yml
dependencies:
  dough_sensors:
  ...
```

### 2. Update files to import the new package

```dart
import 'package:dough_sensors/dough_sensors.dart';
```

### 3. Use the `GyroDoughRecipe` to theme `GyroDough` widgets

```dart
GyroDoughRecipe(
  data: GyroDoughRecipeData(
    sampleCount: 10,
  ),
  child: GyroDough(
    child: ...,
  ),
),
```

## Reading Dough recipe data from contexts

To make the context reading API more consistent with the Provider package, the `DoughRecipe.of(...)` function has changed to prefer named optional parameters.

```dart
// Old way
DoughRecipe.of(context, false);
// New way
DoughRecipe.of(context, listen: false);
```

To make the package easier to manage, the `DoughRecipe.read(...)` and `DoughRecipe.watch(...)` methods have been removed. Instead, prefer to use the following.

```dart
// To `read` the data
DoughRecipe.of(context, listen: false);
// To `watch` the data
DoughRecipe.of(context);
```

## Passing recipe data into a widget

Passing recipe data into a widget directly has been removed to make the package easier to manage. This means that the only way to provide recipe data into a widget is to pass it into the widget through the context. This additionally makes the API more consistent throughout the package.

Old way:

```dart
DraggableDough(
  recipe: DraggableDoughRecipeData(...),
  ...
);
```

New way:

```dart
DraggableDoughRecipe(
  data: DraggableDoughRecipeData(...),
  child: DraggableDough(...),
);
```
